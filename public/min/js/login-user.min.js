document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("loginForm"),t=document.getElementById("signupForm"),n=document.getElementById("goToSignup"),o=document.getElementById("goToLogin"),s=document.getElementById("goToLoginBtn"),i=document.getElementById("success-message"),a=document.getElementById("login-success-message"),l=document.getElementById("form-title");function d(){t&&(t.style.display="none"),e&&(e.style.display="block"),l&&(l.textContent="Login"),i&&(i.style.display="none"),a&&(a.style.display="none")}n&&n.addEventListener("click",function(n){n.preventDefault(),t&&(t.style.display="block"),e&&(e.style.display="none"),l&&(l.textContent="Sign Up"),i&&(i.style.display="none"),a&&(a.style.display="none")}),o&&o.addEventListener("click",function(e){e.preventDefault(),d()}),s&&s.addEventListener("click",function(e){e.preventDefault(),d()}),e&&e.addEventListener("submit",function(e){e.preventDefault();var t=document.getElementById("loginEmail").value,n=document.getElementById("loginPassword").value;firebase.auth().signInWithEmailAndPassword(t,n).then(function(e){e.user.getIdToken().then(function(e){document.cookie=`__session=${e}; path=/; max-age=3600; secure; samesite=strict`,a&&(a.style.display="block"),setTimeout(function(){window.location.href="/"},1200)})}).catch(function(e){alert("Login gagal: "+e.message)})}),t&&t.addEventListener("submit",function(e){e.preventDefault();var t=document.getElementById("signupName").value,n=document.getElementById("signupPhone").value,o=document.getElementById("signupEmail").value,s=document.getElementById("signupPassword").value,a=document.getElementById("signupMembershipCode").value;firebase.auth().createUserWithEmailAndPassword(o,s).then(function(e){var s=e.user;firebase.firestore&&firebase.firestore().collection("users").doc(s.uid).set({name:t,phoneNumber:n,email:o,membershipCode:a,createdAt:firebase.firestore.FieldValue.serverTimestamp(),fcmToken:""}),s.getIdToken().then(function(e){document.cookie=`__session=${e}; path=/; max-age=3600; secure; samesite=strict`,i&&(i.style.display="block"),d()})}).catch(function(e){alert("Sign up gagal: "+e.message)})})});