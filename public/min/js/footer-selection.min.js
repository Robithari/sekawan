import{collection,getDocs,updateDoc,doc}from"https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";import{db}from"../../firebase-config.js";let currentFooterEditId=null;export async function loadFooterContents(){try{console.log("Fungsi loadFooterContents dipanggil");const e=await getDocs(collection(db,"footer"));console.log("Data footer diambil:",e);const t=document.getElementById("footer-selection");t.innerHTML="",e.forEach(e=>{const o=e.data();console.log("Data footer:",o);const n=`\n                <div class="col-12 mb-3">\n                    <div class="card">\n                        <div class="card-body">\n                            <p><strong>Facebook:</strong> <a href="${o.facebook}" target="_blank">${o.facebook}</a></p>\n                            <p><strong>Instagram:</strong> <a href="${o.instagram}" target="_blank">${o.instagram}</a></p>\n                            <p><strong>Email:</strong> <a href="mailto:${o.email}">${o.email}</a></p>\n                            <p><strong>Telepon:</strong> <a href="tel:${o.telephone}">${o.telephone}</a></p>\n                            <button class="btn btn-warning btn-sm me-2" onclick="editFooterContent('${e.id}', '${o.facebook}', '${o.instagram}', '${o.email}', '${o.telephone}')">\n                                <i class="bi bi-pencil-square"></i> Edit\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            `;t.innerHTML+=n})}catch(e){console.error("Error loading footer contents: ",e)}}window.editFooterContent=function(e,t,o,n,l){currentFooterEditId=e,document.getElementById("footer-selection").classList.add("d-none"),document.getElementById("kelola-footer-title").classList.remove("d-none"),document.getElementById("footerForm").classList.remove("d-none"),document.getElementById("facebook").value=t,document.getElementById("instagram").value=o,document.getElementById("email").value=n,document.getElementById("telephone").value=l,document.getElementById("update-footer-btn").style.display="inline-block",document.getElementById("cancel-footer-btn").style.display="inline-block"},document.getElementById("update-footer-btn").onclick=async function(){if(currentFooterEditId)try{await updateDoc(doc(db,"footer",currentFooterEditId),{facebook:document.getElementById("facebook").value,instagram:document.getElementById("instagram").value,email:document.getElementById("email").value,telephone:document.getElementById("telephone").value}),alert("Data footer berhasil diperbarui!"),loadFooterContents(),document.getElementById("footerForm").reset(),document.getElementById("update-footer-btn").style.display="none",document.getElementById("footerForm").classList.add("d-none"),document.getElementById("kelola-footer-title").classList.add("d-none"),document.getElementById("cancel-footer-btn").style.display="none",document.getElementById("footer-selection").classList.remove("d-none"),currentFooterEditId=null}catch(e){console.error("Error updating footer document: ",e),alert("Terjadi kesalahan saat memperbarui data footer.")}},document.getElementById("cancel-footer-btn").onclick=function(){document.getElementById("footerForm").classList.add("d-none"),document.getElementById("kelola-footer-title").classList.add("d-none"),document.getElementById("update-footer-btn").style.display="none",document.getElementById("cancel-footer-btn").style.display="none",document.getElementById("footerForm").reset(),currentFooterEditId=null,document.getElementById("footer-selection").classList.remove("d-none")},window.onload=function(){loadFooterContents()};