window.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("user-status");if(!e)return;let t,a;if(window.firebase&&firebase.auth&&firebase.firestore)t=firebase.auth(),a=firebase.firestore();else{if(!window.db||!window.auth)return void(e.textContent="Firebase belum siap");t=window.auth,a=window.db}t.onAuthStateChanged(async t=>{if(t)try{const n=await a.collection("users").doc(t.uid).get();let i="";n.exists&&n.data().name&&""!==n.data().name.trim()&&(i=n.data().name),i&&""!==i.trim()?e.textContent=`Selamat datang, ${i}`:e.textContent="Akun Anda belum terdaftar di database, silakan hubungi admin."}catch(t){e.textContent="Gagal mengambil data user",console.error("Error Firestore:",t)}else e.textContent="Anda masih belum login"})});