document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("play-btn"),n=document.getElementById("pause-btn"),t=document.getElementById("stop-btn"),o=document.getElementById("audio-status"),i=document.querySelector(".isi-halaman"),c=document.querySelector(".profil-content");let a,d=window.speechSynthesis,s=[],l=!1,u=!0,r="",g=0;function p(){s=d.getVoices(),0===s.length?setTimeout(p,1e3):e.disabled=!1}function m(e){o.textContent=e,o.className="audio-status "+e.toLowerCase()}function f(){let e=r.slice(g,g+500);if(e.length>0){a=new SpeechSynthesisUtterance(e),a.lang="id-ID";let n=s.find(e=>"id-ID"===e.lang);a.voice=n||(s[0]||null),a.onerror=function(e){console.error("Error Speech Synthesis:",e.error)},a.onend=function(){g+=500,g<r.length?f():(console.log("Ucapan selesai."),u=!0,m("Stopped"))},d.speak(a)}}void 0!==d.onvoiceschanged&&(d.onvoiceschanged=p),setTimeout(p,500),e.addEventListener("click",function(){let e="";i&&(e+=i.innerText),c&&(e+="\n"+c.innerText),""===e.trim()&&(e="Tidak ada teks"),r=e,g=u?0:g,!d.speaking||u?(u=!1,m("Playing..."),f()):l&&l&&(l=!1,m("Playing..."),d.resume())}),n.addEventListener("click",function(){d.speaking&&(d.pause(),l=!0,m("Paused"),console.log("Ucapan dijeda."))}),t.addEventListener("click",function(){(d.speaking||d.paused)&&(d.cancel(),u=!0,l=!1,g=0,m("Stopped"),console.log("Ucapan dihentikan."))}),window.addEventListener("beforeunload",function(e){d.cancel()}),window.addEventListener("pagehide",function(e){d.cancel()})});